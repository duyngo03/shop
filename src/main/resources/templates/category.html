<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Products in Category</title>
    <link rel="stylesheet" type="text/css" th:href="@{~/styles/main.css}">
    <link rel="stylesheet" type="text/css" th:href="@{~/styles/category.css}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="stylesheet" type="text/css" th:href="@{~/styles/header.css}">
</head>


<body>
<header th:replace="fragment/header :: header(${#authentication.getName()})"></header>

<div class="category-container">
    <!-- Sidebaar-->
    <div class="wrapper">
        <div class="all-category">DANH MUC SAN PHAM</div>
        <aside id="sidebar">
            <ul class="sidebar-nav">
                <li class="sidebar-item">
                    <div class="category-type">
                        <a th:href="@{/category/1}" class="sidebar-link">
                            Vật dụng decor
                        </a>
                        <i class="fas fa-chevron-down collapsed has-dropdown" data-bs-toggle="collapse"
                           data-bs-target="#category1" aria-expanded="false" aria-controls="category1"></i>
                    </div>
                    <ul id="category1" class="sidebar-dropdown list-unstyled collapse" data-bs-parent="#sidebar">
                        <li class="sidebar-item">
                            <a th:href="@{/category/2}" class="sidebar-link">Đèn trang trí</a>
                        </li>
                        <li class="sidebar-item">
                            <a th:href="@{/category/3}" class="sidebar-link">Kệ, giá đỡ trang trí</a>
                        </li>
                        <li class="sidebar-item">
                            <a th:href="@{/category/4}" class="sidebar-link">Điện thoại cổ</a>
                        </li>
                        <li class="sidebar-item">
                            <a th:href="@{/category/5}" class="sidebar-link">Đồng hồ treo tường</a>
                        </li>
                        <li class="sidebar-item">
                            <a th:href="@{/category/6}" class="sidebar-link">Đồng hồ để bàn</a>
                        </li>
                        <li class="sidebar-item">
                            <a th:href="@{/category/7}" class="sidebar-link">Hộp tủ, vali trang trí</a>
                        </li>
                    </ul>
                </li>
                <li class="sidebar-item">
                    <div class="category-type">
                        <a th:href="@{/category/8}" class="sidebar-link">
                            Đồ trang trí nội thất
                        </a>
                        <i class="fas fa-chevron-down collapsed has-dropdown" data-bs-toggle="collapse"
                           data-bs-target="#category8" aria-expanded="false" aria-controls="category8"></i>
                    </div>
                    <ul id="category8" class="sidebar-dropdown list-unstyled collapse" data-bs-parent="#sidebar">
                        <li class="sidebar-item">
                            <a th:href="@{/category/9}" class="sidebar-link">Bình hoa cắm sẵn</a>
                        </li>
                        <li class="sidebar-item">
                            <a th:href="@{/category/10}" class="sidebar-link">Đồ vật trang trí</a>
                        </li>
                        <li class="sidebar-item">
                            <a th:href="@{/category/11}" class="sidebar-link">Sách giả cổ</a>
                        </li>
                        <li class="sidebar-item">
                            <a th:href="@{/category/12}" class="sidebar-link">Bình hoa, gốm sứ</a>
                        </li>
                        <li class="sidebar-item">
                            <a th:href="@{/category/13}" class="sidebar-link">Khung ảnh vintage</a>
                        </li>
                        <li class="sidebar-item">
                            <a th:href="@{/category/14}" class="sidebar-link">Tranh treo tường</a>
                        </li>
                    </ul>
                </li>
                <li class="sidebar-item">
                    <div class="category-type">
                        <a th:href="@{/category/15}" class="sidebar-link">
                            Vật dụng gia dụng
                        </a>
                        <i class="fas fa-chevron-down collapsed has-dropdown" data-bs-toggle="collapse"
                           data-bs-target="#category15" aria-expanded="false" aria-controls="category15"></i>
                    </div>
                    <ul id="category15" class="sidebar-dropdown list-unstyled collapse" data-bs-parent="#sidebar">
                        <li class="sidebar-item">
                            <a th:href="@{/category/16}" class="sidebar-link">Đèn ngủ cao cấp</a>
                        </li>
                        <li class="sidebar-item">
                            <a th:href="@{/category/17}" class="sidebar-link">Gạt tàn thuốc</a>
                        </li>
                        <li class="sidebar-item">
                            <a th:href="@{/category/18}" class="sidebar-link">Hộp khăn giấy</a>
                        </li>
                        <li class="sidebar-item">
                            <a th:href="@{/category/19}" class="sidebar-link">Móc treo trang trí</a>
                        </li>
                        <li class="sidebar-item">
                            <a th:href="@{/category/20}" class="sidebar-link">Vật dụng nhà bếp</a>
                        </li>
                        <li class="sidebar-item">
                            <a th:href="@{/category/21}" class="sidebar-link">Vật dụng nhà tắm</a>
                        </li>
                    </ul>
                </li>
                <li class="sidebar-item">
                    <div class="category-type">
                        <a th:href="@{/category/22}" class="sidebar-link">
                            Vải, thảm trang trí
                        </a>
                        <i class="fas fa-chevron-down collapsed has-dropdown" data-bs-toggle="collapse"
                           data-bs-target="#category22" aria-expanded="false" aria-controls="category22"></i>
                    </div>
                    <ul id="category22" class="sidebar-dropdown list-unstyled collapse" data-bs-parent="#sidebar">
                        <li class="sidebar-item">
                            <a th:href="@{/category/23}" class="sidebar-link">Chăn ga gối</a>
                        </li>
                        <li class="sidebar-item">
                            <a th:href="@{/category/24}" class="sidebar-link">Gối dựa lưng</a>
                        </li>
                        <li class="sidebar-item">
                            <a th:href="@{/category/25}" class="sidebar-link">Khăn phủ sofa</a>
                        </li>
                        <li class="sidebar-item">
                            <a th:href="@{/category/26}" class="sidebar-link">Khăn trải bàn</a>
                        </li>
                        <li class="sidebar-item">
                            <a th:href="@{/category/27}" class="sidebar-link">Thảm cửa ra vào</a>
                        </li>
                        <li class="sidebar-item">
                            <a th:href="@{/category/28}" class="sidebar-link">Thảm sofa</a>
                        </li>
                    </ul>
                </li>
                <li class="sidebar-item">
                    <div class="category-type">
                        <a th:href="@{/category/29}" class="sidebar-link">
                            Trang trí nội thất
                        </a>
                        <i class="fas fa-chevron-down collapsed has-dropdown" data-bs-toggle="collapse"
                           data-bs-target="#category29" aria-expanded="false" aria-controls="category29"></i>
                    </div>
                    <ul id="category29" class="sidebar-dropdown list-unstyled collapse" data-bs-parent="#sidebar">
                        <li class="sidebar-item">
                            <a th:href="@{/category/30}" class="sidebar-link">Trang trí quán cafe, cửa hàng</a>
                        </li>
                        <li class="sidebar-item">
                            <a th:href="@{/category/31}" class="sidebar-link">Trang trí phòng bếp</a>
                        </li>
                        <li class="sidebar-item">
                            <a th:href="@{/category/32}" class="sidebar-link">Trang trí phòng khách</a>
                        </li>
                        <li class="sidebar-item">
                            <a th:href="@{/category/33}" class="sidebar-link">Trang trí phòng ngủ</a>
                        </li>
                        <li class="sidebar-item">
                            <a th:href="@{/category/34}" class="sidebar-link">Trang trí phòng làm việc</a>
                        </li>
                    </ul>
                </li>
            </ul>
        </aside>
    </div>

    <!-- Products-->
    <div class="products">
        <div class="product" style="width: 18rem;" th:each=" product : ${products}" onmouseover="handleMouseOver(event)" onmouseout="handleMouseOut(event)">
            <div class="card" >
                <a th:href="@{/product/{id}(id=${product.id})}">
                    <img src="/image/tshirt.png" class="card-img-top" alt="...">
                </a>

            </div>
            <div class="card-body" >
                <p class="card-text product_name" th:text="${product.name}"></p>
                <p class="card-text product_price" th:text="${product.price}"></p>
            </div>
        </div>


<!--        <div class="card" style="width: 18rem;" th:each=" product : ${products}">-->
<!--            <a th:href="@{/product/{id}(id=${product.id})}">-->
<!--                <img src="/image/tshirt.png" class="card-img-top" alt="...">-->
<!--                <div class="card-body">-->
<!--                    <p class="card-text" th:text="${product.name}"></p>-->
<!--                    <p class="card-text" th:text="${product.price}"></p>-->
<!--                </div>-->
<!--            </a>-->
<!--        </div>-->
    </div>
</div>
<footer th:replace="fragment/footer" :: footer></footer>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
<script>
    function handleMouseOver(event) {
        const priceElement = event.currentTarget.querySelector('.product_price');
        priceElement.dataset.originalPrice = priceElement.textContent;
        priceElement.textContent = 'Thêm vào giỏ hàng';
    }

    function handleMouseOut(event) {
        const priceElement = event.currentTarget.querySelector('.product_price');
        priceElement.textContent = priceElement.dataset.originalPrice;
    }

    const handleCategory = (event) => {
        const pathName = window.location.pathname;
        const category = parseInt(pathName.split('/')[2]);
        if(category >= 1 && category <= 7) {
            return 'category1';
        } else if(category >= 8 && category <= 14) {
            return 'category8';
        } else if(category >= 15 && category <= 21) {
            return 'category15';
        } else if(category >= 22 && category <= 28) {
            return 'category22';
        } else if(category >= 29 && category <= 34) {
            return 'category29';
        }

    }
    document.addEventListener('DOMContentLoaded', (event) => {
        const links = document.querySelectorAll('.sidebar-link');
        const currentPath = window.location.pathname;

        links.forEach(link => {
            const parentCategory = handleCategory();
            let parentDropdown = link.closest(`#${parentCategory}`);
            if (parentDropdown) {
                parentDropdown.classList.add('show');
            }
            if (link.getAttribute('href') === currentPath) {
                link.classList.add('active');
            }
            const category = parentCategory.split('category')[1];
            const parentPath = `/category/${category}`;
            if(link.getAttribute('href') === parentPath) {
                link.classList.add('active');
            }
        });
    });
</script>
</body>
</html>